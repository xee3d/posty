# Posty 서버 동기화 문제 해결 가이드

## 문제점
1. 트렌드 API와 글쓰기 API 동시 사용 시 충돌
2. 1-2시간 후 글쓰기 기능이 작동하지 않는 문제
3. 트렌드 페이지 API 연동 오류

## 해결 방안

### 1. 서버 독립성 확보
- 트렌드 서버와 글쓰기 서버를 완전히 분리
- 각 서버가 독립적으로 작동하도록 설정
- 서버 간 직접적인 의존성 제거

### 2. 캐싱 전략 개선
- 메모리 캐시 + AsyncStorage 이중 캐싱
- 캐시 유효 시간: 4시간
- 네트워크 오류 시 캐시된 데이터 사용

### 3. API 호출 안정성 향상
- 통합 API 서비스 (`apiService.ts`) 사용
- 자동 재시도 (최대 3회)
- 타임아웃 설정 (10초)
- 지수 백오프 적용

### 4. 에러 처리 강화
- 서버 오류 시 샘플 데이터 제공
- 사용자에게 적절한 에러 메시지 표시
- 로깅 개선으로 디버깅 용이

## 테스트 방법

### 서버 상태 확인
```bash
# 서버 헬스 체크
.\check-server-health.bat
```

### 캐시 초기화
```javascript
// 개발자 도구에서 실행
await trendService.clearCache();
```

### 로그 확인
- Chrome DevTools > Console에서 `[TrendService]`, `[ApiService]` 로그 확인
- 네트워크 탭에서 API 호출 상태 확인

## 모니터링 포인트
1. API 응답 시간 (10초 이내)
2. 캐시 히트율 (메모리/스토리지)
3. 재시도 횟수
4. 에러 발생 빈도

## 향후 개선사항
1. Redis 기반 중앙 캐싱
2. API Gateway 도입
3. 서버 모니터링 대시보드
4. 자동 장애 복구 시스템
