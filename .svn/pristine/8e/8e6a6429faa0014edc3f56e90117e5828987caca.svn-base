import React, { useState, useEffect } from 'react';
import {
  View,
  Text,
  ScrollView,
  TouchableOpacity,
  StyleSheet,
  SafeAreaView,
  RefreshControl,
  Alert,
} from 'react-native';
import { Post, Platform } from '../types';
import { COLORS, FONTS, SPACING, BORDER_RADIUS, PLATFORMS, MOLLY_MESSAGES, BRAND, CARD_THEME, DARK_COLORS } from '../utils/constants';
import { useAppTheme } from '../hooks/useAppTheme';
import Icon from 'react-native-vector-icons/Ionicons';
import MaterialIcon from 'react-native-vector-icons/MaterialIcons';
import { AnimatedCard, SlideInView, FadeInView, ScaleButton } from '../components/AnimationComponents';
import { getSavedContents, SavedContent } from '../utils/storage';
import { APP_TEXT, getText } from '../utils/textConstants';
import dailyTipsService from '../services/dailyTipsService';
import simplePostService from '../services/simplePostService';

interface HomeScreenProps {
  onNavigate: (tab: string, content?: any) => void;
}

const HomeScreen: React.FC<HomeScreenProps> = ({ onNavigate }) => {
  const { colors, cardTheme, isDark } = useAppTheme();
  const [posts, setPosts] = useState<Post[]>([]);
  const [refreshing, setRefreshing] = useState(false);
  const [coachingTip, setCoachingTip] = useState<any>(null);
  const [tipIndex, setTipIndex] = useState(0);

  // ìƒ˜í”Œ ë°ì´í„°
  const samplePosts: Post[] = [
    {
      id: '1',
      title: 'ì£¼ë§ ë¸ŒëŸ°ì¹˜ í›„ê¸°',
      content: 'ì˜¤ëŠ˜ë„ ë“ ë“ í•œ ì¹´í˜ì¸ ì¶©ì „ â˜• ì›”ìš”ì¼ ì•„ì¹¨ì„ ì‹œì‘í•˜ëŠ” ë‚˜ë§Œì˜ ë£¨í‹´',
      platform: 'instagram',
      status: 'published',
      createdAt: new Date('2024-01-15T10:30:00'),
      updatedAt: new Date('2024-01-15T10:30:00'),
      tags: ['ì¹´í˜', 'ë¸ŒëŸ°ì¹˜', 'ì£¼ë§'],
      engagement: { likes: 245, comments: 23, shares: 5 },
    },
  ];

  // ì‚¬ì „ ì •ì˜ëœ íŒ ëª©ë¡
  const predefinedTips = [
    {
      emoji: 'ğŸ’¡',
      label: 'ì˜¤ëŠ˜ì˜ ê¿€íŒ',
      value: 'ìì—°ê´‘ í™œìš©',
      subtext: 'ì¹´í˜ ì‚¬ì§„ì€ ìì—°ê´‘ì´ ë“¤ì–´ì˜¤ëŠ” ì°½ê°€ì—ì„œ ì°ìœ¼ë©´ ë” ì˜ˆì˜ê²Œ ë‚˜ì™€ìš”. ì˜¤ì „ 10-11ì‹œê°€ ê°€ì¥ ì¢‹ì€ ì‹œê°„ëŒ€ì˜ˆìš”!'
    },
    {
      emoji: 'ğŸ“¸',
      label: 'ì‚¬ì§„ êµ¬ë„ íŒ',
      value: '3ë¶„í•  ë²•ì¹™',
      subtext: 'í™”ë©´ì„ ê°€ë¡œì„¸ë¡œ 3ë“±ë¶„í•˜ì—¬ í”¼ì‚¬ì²´ë¥¼ êµì°¨ì ì— ë°°ì¹˜í•˜ë©´ ì•ˆì •ì ì¸ êµ¬ë„ê°€ ì™„ì„±ë¼ìš”!'
    },
    {
      emoji: 'âœï¸',
      label: 'ê¸€ì“°ê¸° íŒ',
      value: 'ì²« ë¬¸ì¥ì´ ì¤‘ìš”í•´ìš”',
      subtext: 'ì§ˆë¬¸ì´ë‚˜ ê³µê°ëŒ€ë¥¼ í˜•ì„±í•˜ëŠ” ë¬¸ì¥ìœ¼ë¡œ ì‹œì‘í•˜ë©´ ë…ìì˜ ê´€ì‹¬ì„ ëŒ ìˆ˜ ìˆì–´ìš”!'
    },
    {
      emoji: 'ğŸ¨',
      label: 'ìƒ‰ê° ì¡°ì • íŒ',
      value: 'í†µì¼ê° ìˆëŠ” í”¼ë“œ',
      subtext: 'ë¹„ìŠ·í•œ í†¤ê³¼ í•„í„°ë¥¼ ì‚¬ìš©í•˜ë©´ ì „ì²´ì ìœ¼ë¡œ ì¡°í™”ë¡œìš´ í”¼ë“œë¥¼ ë§Œë“¤ ìˆ˜ ìˆì–´ìš”!'
    },
    {
      emoji: 'â°',
      label: 'í¬ìŠ¤íŒ… ì‹œê°„ íŒ',
      value: 'ì ì‹¬ì‹œê°„ í™œìš©',
      subtext: '12ì‹œ-1ì‹œ ì‚¬ì´ëŠ” ë§ì€ ì‚¬ëŒë“¤ì´ íœ´ì‹í•˜ë©° SNSë¥¼ ë³´ëŠ” ì‹œê°„ì´ì—ìš”!'
    },
    {
      emoji: 'ğŸ’¬',
      label: 'ì†Œí†µ íŒ',
      value: 'ëŒ“ê¸€ì— ë‹µê¸€ ë‹¬ê¸°',
      subtext: 'íŒ”ë¡œì›Œì˜ ëŒ“ê¸€ì— ì§„ì‹¬ ì–´ë¦° ë‹µê¸€ì„ ë‹¬ë©´ ì¹œë°€ê°ì´ ë†’ì•„ì ¸ìš”!'
    },
    {
      emoji: 'ğŸ·ï¸',
      label: 'í•´ì‹œíƒœê·¸ íŒ',
      value: 'ì ì ˆí•œ ê°œìˆ˜ ì‚¬ìš©',
      subtext: 'ì¸ìŠ¤íƒ€ê·¸ë¨ì€ 5-10ê°œ, íŠ¸ìœ„í„°ëŠ” 2-3ê°œê°€ ì ë‹¹í•´ìš”. ë„ˆë¬´ ë§ìœ¼ë©´ ìŠ¤íŒ¸ìœ¼ë¡œ ë³´ì¼ ìˆ˜ ìˆì–´ìš”!'
    }
  ];

  // ì˜¤ëŠ˜ì˜ ê¿€íŒ ê°€ì ¸ì˜¤ê¸°
  const loadCoachingTip = () => {
    // í˜„ì¬ ì¸ë±ìŠ¤ì˜ íŒì„ ì„¤ì •
    setCoachingTip(predefinedTips[tipIndex]);
    // ë‹¤ìŒ ì¸ë±ìŠ¤ ì¤€ë¹„ (ìˆœí™˜)
    setTipIndex((prevIndex) => (prevIndex + 1) % predefinedTips.length);
  };

  useEffect(() => {
    setPosts(samplePosts);
    loadCoachingTip();
  }, []);

  const onRefresh = async () => {
    setRefreshing(true);
    try {
      setPosts(samplePosts);
      loadCoachingTip();
    } catch (error) {
      console.error('Failed to refresh:', error);
    } finally {
      setRefreshing(false);
    }
  };

  const handleQuickAction = (action: string) => {
    switch (action) {
      case APP_TEXT.home.quickActions.writePost:
        onNavigate('ai-write');
        break;
      case APP_TEXT.home.quickActions.analyzePhoto:
        onNavigate('ai-write', { initialMode: 'photo' });
        break;
      case 'ë¬¸ì¥ ì •ë¦¬í•˜ê¸°':
        onNavigate('ai-write', { initialMode: 'polish' });
        break;
      case 'ë‚´ ìŠ¤íƒ€ì¼':
        onNavigate('my-style');
        break;
      case 'í…œí”Œë¦¿':
        // í…œí”Œë¦¿ í™”ë©´ì´ ì—†ìœ¼ë¯€ë¡œ AI ê¸€ì“°ê¸°ë¡œ ì´ë™
        onNavigate('ai-write');
        break;
      case 'íŠ¸ë Œë“œ':
        onNavigate('trend');
        break;
      case 'ê´‘ê³  í…ŒìŠ¤íŠ¸':
        onNavigate('feed-ads');
        break;
      case 'êµ¬ë…':
        onNavigate('subscription');
        break;
      default:
        break;
    }
  };

  const styles = createStyles(colors, cardTheme);

  return (
    <SafeAreaView style={styles.container}>
      <ScrollView
        style={styles.content}
        refreshControl={
          <RefreshControl refreshing={refreshing} onRefresh={onRefresh} />
        }
        showsVerticalScrollIndicator={false}
      >
        {/* í—¤ë” ì„¹ì…˜ */}
        <FadeInView delay={0} duration={250}>
          <View style={styles.headerSection}>
            <View style={styles.headerContent}>
              <View style={styles.logoContainer}>
                <View style={styles.logoCircle}>
                  <Text style={styles.mollyIcon}>{APP_TEXT.brand.characterName.charAt(0)}</Text>
                </View>
                <View>
                  <Text style={styles.appTitle}>{BRAND.name}</Text>
                  <Text style={styles.appSubtitle}>{BRAND.tagline}</Text>
                </View>
              </View>
            </View>
          </View>
        </FadeInView>

        {/* Molly ì¸ì‚¬ ë°°ë„ˆ */}
        <FadeInView delay={50} duration={200}>
          <View style={styles.mollyBanner}>
            <View style={styles.mollyAvatar}>
              <Text style={styles.mollyAvatarText}>ğŸ‘‹</Text>
            </View>
            <View style={styles.mollyBannerContent}>
              <Text style={styles.mollyBannerTitle}>{APP_TEXT.home.header.greeting}</Text>
              <Text style={styles.mollyBannerSubtitle}>{APP_TEXT.home.header.subtitle}</Text>
            </View>
          </View>
        </FadeInView>

        {/* ë¹ ë¥¸ ìƒì„± */}
        <FadeInView delay={175}>
          <View style={styles.quickActions}>
            <Text style={styles.sectionTitle}>{APP_TEXT.home.quickActions.title}</Text>
            <View style={styles.mainActions}>
              <ScaleButton 
                style={styles.mainActionCard}
                onPress={() => handleQuickAction(APP_TEXT.home.quickActions.writePost)}
              >
                <View style={styles.mainActionRow}>
                  <View style={styles.mainActionIcon}>
                  <MaterialIcon name="edit" size={24} color={colors.white} />
                  </View>
                  <View style={styles.mainActionTextContainer}>
                    <Text style={styles.mainActionTitle}>{APP_TEXT.home.quickActions.writePost}</Text>
                    <Text style={styles.mainActionDesc}>{APP_TEXT.home.quickActions.writePostDesc}</Text>
                  </View>
                </View>
              </ScaleButton>

              {/* ë¬¸ì¥ ì •ë¦¬í•˜ê¸° - ìƒˆë¡œ ì¶”ê°€ */}
              <ScaleButton 
                style={styles.mainActionCard}
                onPress={() => handleQuickAction('ë¬¸ì¥ ì •ë¦¬í•˜ê¸°')}
              >
                <View style={styles.mainActionRow}>
                  <View style={[styles.mainActionIcon, { backgroundColor: '#9C27B0' }]}>
                    <MaterialIcon name="auto-fix-high" size={24} color={colors.white} />
                  </View>
                  <View style={styles.mainActionTextContainer}>
                    <Text style={styles.mainActionTitle}>ë¬¸ì¥ ì •ë¦¬í•˜ê¸°</Text>
                    <Text style={styles.mainActionDesc}>ì‘ì„±í•œ ê¸€ì„ ë” ë©‹ì§€ê²Œ ë‹¤ë“¬ì–´ë“œë ¤ìš”</Text>
                  </View>
                </View>
              </ScaleButton>

              <ScaleButton 
                style={styles.mainActionCard}
                onPress={() => handleQuickAction(APP_TEXT.home.quickActions.analyzePhoto)}
              >
                <View style={styles.mainActionRow}>
                  <View style={[styles.mainActionIcon, { backgroundColor: '#E91E63' }]}>
                  <MaterialIcon name="image" size={24} color={colors.white} />
                  </View>
                  <View style={styles.mainActionTextContainer}>
                    <Text style={styles.mainActionTitle}>{APP_TEXT.home.quickActions.analyzePhoto}</Text>
                    <Text style={styles.mainActionDesc}>{APP_TEXT.home.quickActions.analyzePhotoDesc}</Text>
                  </View>
                </View>
              </ScaleButton>
            </View>

            {/* ë³´ì¡° ê¸°ëŠ¥ë“¤ */}
            <View style={styles.subActions}>
              {/* ê°œë°œ í™˜ê²½ì—ì„œë§Œ í‘œì‹œ - ì¶œì‹œ ì‹œ ì£¼ì„ ì²˜ë¦¬ */}
              {__DEV__ && (
                <AnimatedCard delay={400} style={styles.subActionCard}>
                  <TouchableOpacity 
                    style={styles.subActionContent}
                    onPress={() => handleQuickAction('ê´‘ê³  í…ŒìŠ¤íŠ¸')}
                  >
                    <MaterialIcon name="monetization-on" size={20} color={colors.text.secondary} />
                    <Text style={styles.subActionText}>ê´‘ê³  í…ŒìŠ¤íŠ¸</Text>
                  </TouchableOpacity>
                </AnimatedCard>
              )}
              
              {/* êµ¬ë… ë²„íŠ¼ - í•­ìƒ í‘œì‹œ */}
              <AnimatedCard delay={__DEV__ ? 450 : 400} style={[styles.subActionCard, !__DEV__ && styles.subscriptionCardFull]}>
                <TouchableOpacity 
                  style={styles.subActionContent}
                  onPress={() => handleQuickAction('êµ¬ë…')}
                >
                  <MaterialIcon name="workspace-premium" size={20} color={colors.text.secondary} />
                  <Text style={styles.subActionText}>êµ¬ë…</Text>
                </TouchableOpacity>
              </AnimatedCard>
            </View>
          </View>
        </FadeInView>

        {/* í¬ìŠ¤í‹°ì˜ íŠ¹ë³„ ì¡°ì–¸ */}
        <SlideInView direction="left" delay={550}>
          <View style={styles.coachingSection}>
            <Text style={styles.sectionTitle}>í¬ìŠ¤í‹°ì˜ íŠ¹ë³„ ì¡°ì–¸</Text>
            
            <View style={styles.coachingCard}>
              <View style={styles.coachingIconContainer}>
                <MaterialIcon name="tips-and-updates" size={24} color={colors.white} />
              </View>
              <View style={styles.coachingContent}>
                <Text style={styles.coachingTitle}>
                  {coachingTip ? `${coachingTip.emoji} ${coachingTip.label}` : 'ğŸ’¡ ì˜¤ëŠ˜ì˜ ê¿€íŒ'}
                </Text>
                <Text style={styles.coachingText}>
                  {coachingTip ? 
                    (coachingTip.value.includes('\n') ? 
                      `${coachingTip.value.replace('\n', ' ')} - ${coachingTip.subtext}` : 
                      `${coachingTip.value}! ${coachingTip.subtext}`
                    ) : 
                    'ì¹´í˜ ì‚¬ì§„ì€ ìì—°ê´‘ì´ ë“¤ì–´ì˜¤ëŠ” ì°½ê°€ì—ì„œ ì°ìœ¼ë©´ ë” ì˜ˆì˜ê²Œ ë‚˜ì™€ìš”. ì˜¤ì „ 10-11ì‹œê°€ ê°€ì¥ ì¢‹ì€ ì‹œê°„ëŒ€ì˜ˆìš”!'
                  }
                </Text>
              </View>
            </View>
          </View>
        </SlideInView>

        {/* ì˜¤ëŠ˜ì˜ íŠ¸ë Œë“œ - ê°„ë‹¨í•œ í•´ì‹œíƒœê·¸ ì¶”ì²œ */}
        <SlideInView direction="left" delay={600}>
          <View style={styles.trendSection}>
            <Text style={styles.sectionTitle}>ì˜¤ëŠ˜ì˜ ì¶”ì²œ í•´ì‹œíƒœê·¸</Text>
            <ScrollView horizontal showsHorizontalScrollIndicator={false} style={styles.hashtagScroll}>
              {['ì¼ìƒ', 'ì£¼ë§', 'ì¹´í˜', 'ë§›ì§‘', 'ì—¬í–‰', 'ìš´ë™', 'ì±…ìŠ¤íƒ€ê·¸ë¨'].map((tag, index) => (
                <TouchableOpacity
                  key={tag}
                  style={styles.hashtagChip}
                  onPress={() => onNavigate('ai-write', { content: `#${tag} `, hashtags: [tag] })}
                  activeOpacity={0.7}
                >
                  <Text style={styles.hashtagText}>#{tag}</Text>
                </TouchableOpacity>
              ))}
            </ScrollView>
          </View>
        </SlideInView>

        {/* í¬ìŠ¤í‹°ì˜ ë§ì¶¤ ì¶”ì²œ */}
        <SlideInView direction="right" delay={650}>
          <View style={styles.todaySection}>
            <View style={styles.sectionHeader}>
              <Text style={styles.sectionTitle}>{APP_TEXT.brand.characterNameKo}ì˜ ë§ì¶¤ ì¶”ì²œ</Text>
            </View>
            
            <ScrollView horizontal showsHorizontalScrollIndicator={false} style={styles.recommendScroll}>
              {/* ì¼ì • ê¸°ë°˜ ì¶”ì²œ */}
              <AnimatedCard delay={700} style={styles.recommendCard}>
                <View style={styles.recommendIconContainer}>
                  <MaterialIcon name="event" size={24} color={colors.white} />
                </View>
                <View style={styles.recommendBadge}>
                  <Text style={styles.recommendBadgeText}>ğŸ“… ì˜¤ëŠ˜ì˜ ì¼ì •</Text>
                </View>
                <Text style={styles.recommendTitle}>"íŒ€ ë¯¸íŒ…" í›„ê¸° ì‘ì„±í•˜ê¸°</Text>
                <Text style={styles.recommendContent}>
                  ì˜¤ëŠ˜ ì˜¤í›„ 2ì‹œì— ìˆì—ˆë˜ íŒ€ ë¯¸íŒ…,{"\n"}ì–´ë–¤ ì¸ì‚¬ì´íŠ¸ë¥¼ ì–»ìœ¼ì…¨ë‚˜ìš”?
                </Text>
                <View style={styles.recommendFooter}>
                  <View style={styles.recommendMeta}>
                    <Icon name="time-outline" size={14} color={colors.text.secondary} />
                    <Text style={styles.recommendMetaText}>2ì‹œê°„ ì „ ì¼ì •</Text>
                  </View>
                  <ScaleButton 
                    style={styles.writeButton}
                    onPress={() => {
                      onNavigate('ai-write', {
                        prompt: 'ì˜¤ëŠ˜ íŒ€ ë¯¸íŒ…ì—ì„œ ì–»ì€ ì¸ì‚¬ì´íŠ¸',
                        category: 'professional'
                      });
                    }}
                  >
                    <Text style={styles.writeButtonText}>ê¸€ì“°ê¸°</Text>
                  </ScaleButton>
                </View>
              </AnimatedCard>

              {/* ì‚¬ì§„ ê¸°ë°˜ ì¶”ì²œ */}
              <AnimatedCard delay={750} style={[styles.recommendCard, { marginLeft: SPACING.sm }]}>
                <View style={[styles.recommendIconContainer, { backgroundColor: '#E91E63' }]}>
                  <MaterialIcon name="photo-library" size={24} color={colors.white} />
                </View>
                <View style={styles.recommendBadge}>
                  <Text style={styles.recommendBadgeText}>ğŸ“¸ ìµœê·¼ ì‚¬ì§„</Text>
                </View>
                <Text style={styles.recommendTitle}>ì–´ì œ ì°ì€ ì¹´í˜ ì‚¬ì§„</Text>
                <Text style={styles.recommendContent}>
                  ê°¤ëŸ¬ë¦¬ì— ìˆëŠ” ì¹´í˜ ì‚¬ì§„ìœ¼ë¡œ{"\n"}ê°ì„± ê°€ë“í•œ í¬ìŠ¤íŒ…ì„ ë§Œë“¤ì–´ë³´ì„¸ìš”!
                </Text>
                <View style={styles.recommendFooter}>
                  <View style={styles.recommendMeta}>
                    <Icon name="image" size={14} color={colors.text.secondary} />
                    <Text style={styles.recommendMetaText}>3ì¥ì˜ ì‚¬ì§„</Text>
                  </View>
                  <ScaleButton 
                    style={styles.writeButton}
                    onPress={() => {
                      onNavigate('ai-write', {
                        mode: 'photo',
                        prompt: 'ì¹´í˜ ë¶„ìœ„ê¸°ì™€ ë©”ë‰´ ì†Œê°œ'
                      });
                    }}
                  >
                    <Text style={styles.writeButtonText}>ê¸€ì“°ê¸°</Text>
                  </ScaleButton>
                </View>
              </AnimatedCard>

              {/* ì‹œê°„ëŒ€ ê¸°ë°˜ ì¶”ì²œ */}
              <AnimatedCard delay={800} style={[styles.recommendCard, { marginLeft: SPACING.sm }]}>
                <View style={[styles.recommendIconContainer, { backgroundColor: '#2196F3' }]}>
                  <MaterialIcon name="access-time" size={24} color={colors.white} />
                </View>
                <View style={styles.recommendBadge}>
                  <Text style={styles.recommendBadgeText}>â° í™œë™ ì‹œê°„</Text>
                </View>
                <Text style={styles.recommendTitle}>ì €ë… 7ì‹œ í™©ê¸ˆ ì‹œê°„ëŒ€!</Text>
                <Text style={styles.recommendContent}>
                  ì§€ê¸ˆì´ ê°€ì¥ ë§ì€ ì‚¬ëŒë“¤ì´{"\n"}í™œë™í•˜ëŠ” ì‹œê°„ì´ì—ìš”. í¬ìŠ¤íŒ… í•´ë³¼ê¹Œìš”?
                </Text>
                <View style={styles.recommendFooter}>
                  <View style={styles.recommendMeta}>
                    <Icon name="trending-up" size={14} color={colors.text.secondary} />
                    <Text style={styles.recommendMetaText}>ì°¸ì—¬ìœ¨ ë†’ìŒ</Text>
                  </View>
                  <ScaleButton 
                    style={styles.writeButton}
                    onPress={() => {
                      onNavigate('ai-write');
                    }}
                  >
                    <Text style={styles.writeButtonText}>ê¸€ì“°ê¸°</Text>
                  </ScaleButton>
                </View>
              </AnimatedCard>
            </ScrollView>
          </View>
        </SlideInView>

        <View style={styles.bottomSpace} />
      </ScrollView>
    </SafeAreaView>
  );
};

const createStyles = (colors: typeof COLORS, cardTheme: typeof CARD_THEME) => {
  const isDark = colors.background === '#1A202C'; // ë‹¤í¬ëª¨ë“œ ì²´í¬
  
  return StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: colors.background,
  },
  content: {
    flex: 1,
  },
  headerSection: {
    backgroundColor: colors.primary,
    paddingBottom: 100,
  },
  headerContent: {
    flexDirection: 'row',
    justifyContent: 'space-between',
    alignItems: 'center',
    paddingHorizontal: SPACING.lg,
    paddingTop: SPACING.md,
  },
  logoContainer: {
    flexDirection: 'row',
    alignItems: 'center',
  },
  logoCircle: {
    width: 50,
    height: 50,
    borderRadius: 25,
    backgroundColor: 'rgba(255,255,255,0.25)',
    justifyContent: 'center',
    alignItems: 'center',
    marginRight: SPACING.sm,
  },
  mollyIcon: {
    fontSize: 24,
    fontWeight: '700',
    color: '#FFFFFF',
  },
  appTitle: {
    fontSize: 20,
    fontWeight: '700',
    color: '#FFFFFF',
    letterSpacing: -0.5,
  },
  appSubtitle: {
    fontSize: 14,
    color: 'rgba(255,255,255,0.85)',
    marginTop: 2,
  },
  headerButton: {
    width: 44,
    height: 44,
    borderRadius: 22,
    backgroundColor: 'rgba(255,255,255,0.25)',
    justifyContent: 'center',
    alignItems: 'center',
  },
  // Molly ë°°ë„ˆ
  mollyBanner: {
    backgroundColor: cardTheme.molly.background,
    marginHorizontal: SPACING.lg,
    marginTop: -70,
    borderRadius: 16,
    padding: SPACING.lg,
    flexDirection: 'row',
    alignItems: 'center',
    shadowColor: colors.primary,
    shadowOffset: { width: 0, height: 4 },
    shadowOpacity: isDark ? 0.3 : 0.15,
    shadowRadius: 12,
    elevation: 8,
  },
  mollyAvatar: {
    width: 48,
    height: 48,
    borderRadius: 24,
    backgroundColor: colors.primary,
    justifyContent: 'center',
    alignItems: 'center',
    marginRight: SPACING.md,
  },
  mollyAvatarText: {
    fontSize: 28,
    color: colors.white,
  },
  mollyBannerContent: {
    flex: 1,
  },
  mollyBannerTitle: {
    fontSize: 16,
    fontWeight: '700',
    color: colors.primary,
    letterSpacing: -0.3,
  },
  mollyBannerSubtitle: {
    fontSize: 14,
    color: colors.text.primary,
    marginTop: 4,
    fontWeight: '500',
  },
  // ë¹ ë¥¸ ìƒì„±
  quickActions: {
    paddingHorizontal: SPACING.lg,
    marginTop: SPACING.xl,
  },
  mainActions: {
    gap: SPACING.sm,
    marginBottom: SPACING.md,
  },
  // ê¸°ì¡´ ìŠ¤íƒ€ì¼ (2ì¤„ ë²„ì „)
  mainActionCard: {
    backgroundColor: colors.surface,
    borderRadius: 12,
    paddingVertical: 20,
    paddingHorizontal: 20,
    marginBottom: 12,
    ...cardTheme.default.shadow,
  },
  mainActionRow: {
    flexDirection: 'row',
    alignItems: 'center',
  },
  mainActionIcon: {
    width: 44,
    height: 44,
    borderRadius: 12,
    backgroundColor: colors.primary,
    justifyContent: 'center',
    alignItems: 'center',
    marginRight: 16,
  },
  mainActionTextContainer: {
    flex: 1,
  },
  mainActionTitle: {
    fontSize: 16,
    fontWeight: '600',
    color: colors.text.primary,
    marginBottom: 3,
    includeFontPadding: false,
    lineHeight: 20,
  },
  mainActionDesc: {
    fontSize: 14,
    color: colors.text.secondary,
    includeFontPadding: false,
    lineHeight: 18,
  },
  subActions: {
    flexDirection: 'row',
    gap: SPACING.sm,
  },
  subActionCard: {
    flex: 1,
    backgroundColor: colors.lightGray,
    borderRadius: 12,
  },
  subActionContent: {
    paddingVertical: SPACING.md,
    alignItems: 'center',
    gap: SPACING.xs,
  },
  subActionText: {
    fontSize: 13,
    fontWeight: '500',
    color: colors.text.secondary,
  },

  sectionHeader: {
    flexDirection: 'row',
    justifyContent: 'space-between',
    alignItems: 'center',
    marginBottom: SPACING.md,
    paddingHorizontal: SPACING.lg,
  },
  refreshText: {
    fontSize: 14,
    color: colors.primary,
    fontWeight: '500',
  },
  moreText: {
    fontSize: 14,
    color: colors.primary,
    fontWeight: '500',
  },
  // AI ì½”ì¹­
  coachingSection: {
    paddingHorizontal: SPACING.lg,
    marginTop: SPACING.xl,
  },
  sectionTitle: {
    fontSize: 18,
    fontWeight: '700',
    color: colors.text.primary,
    marginBottom: SPACING.md,
    letterSpacing: -0.3,
  },
  coachingCard: {
    backgroundColor: cardTheme.molly.background,
    borderRadius: 16,
    padding: SPACING.lg,
    flexDirection: 'row',
    alignItems: 'flex-start',
  },
  coachingIconContainer: {
    width: 40,
    height: 40,
    borderRadius: 20,
    backgroundColor: colors.primary,
    justifyContent: 'center',
    alignItems: 'center',
    marginRight: SPACING.md,
  },
  coachingContent: {
    flex: 1,
  },
  coachingTitle: {
    fontSize: 15,
    fontWeight: '600',
    color: cardTheme.molly.titleColor,
    marginBottom: SPACING.xs,
  },
  coachingText: {
    fontSize: 14,
    color: cardTheme.molly.textColor,
    lineHeight: 20,
  },
  // ì¶”ì²œ ì„¹ì…˜
  todaySection: {
    marginTop: SPACING.xl,
  },
  recommendScroll: {
    paddingLeft: SPACING.lg,
  },
  recommendCard: {
    backgroundColor: colors.surface,
    borderRadius: 16,
    padding: SPACING.lg,
    width: 280,
    ...cardTheme.default.shadow,
  },
  recommendIconContainer: {
    width: 48,
    height: 48,
    borderRadius: 24,
    backgroundColor: colors.primary,
    justifyContent: 'center',
    alignItems: 'center',
    marginBottom: SPACING.sm,
  },
  recommendTitle: {
    fontSize: 16,
    fontWeight: '600',
    color: colors.text.primary,
    marginBottom: SPACING.xs,
  },
  recommendBadge: {
    backgroundColor: colors.lightGray,
    paddingHorizontal: 12,
    paddingVertical: 6,
    borderRadius: 20,
    alignSelf: 'flex-start',
    marginBottom: SPACING.sm,
  },
  recommendBadgeText: {
    fontSize: 12,
    fontWeight: '500',
    color: colors.text.secondary,
  },
  personalizedBadge: {
    flexDirection: 'row',
    alignItems: 'center',
    backgroundColor: colors.primary + '15',
    paddingHorizontal: 10,
    paddingVertical: 4,
    borderRadius: 12,
    alignSelf: 'flex-start',
    marginBottom: SPACING.xs,
    gap: 4,
  },
  personalizedText: {
    fontSize: 11,
    color: colors.primary,
    fontWeight: '500',
  },
  recommendContent: {
    fontSize: 14,
    color: colors.text.primary,
    lineHeight: 22,
    marginBottom: SPACING.sm,
  },
  recommendHashtags: {
    flexDirection: 'row',
    marginBottom: SPACING.md,
  },
  recommendHashtag: {
    fontSize: 12,
    color: colors.primary,
    marginRight: SPACING.xs,
  },
  recommendFooter: {
    flexDirection: 'row',
    justifyContent: 'space-between',
    alignItems: 'center',
  },
  recommendMeta: {
    flexDirection: 'row',
    alignItems: 'center',
    gap: SPACING.xs,
  },
  recommendMetaText: {
    fontSize: 12,
    color: colors.text.tertiary,
  },
  writeButton: {
    backgroundColor: colors.primary,
    paddingHorizontal: 20,
    paddingVertical: 10,
    borderRadius: 24,
  },
  writeButtonText: {
    color: cardTheme.molly.button.text,
    fontSize: 14,
    fontWeight: '600',
    letterSpacing: -0.2,
  },
  bottomSpace: {
    height: SPACING.xxl,
  },
  subscriptionCardFull: {
    flex: 1,
  },
  trendSection: {
    marginBottom: SPACING.xl,
    paddingHorizontal: SPACING.lg,
  },
  hashtagScroll: {
    marginTop: SPACING.sm,
  },
  hashtagChip: {
    backgroundColor: colors.surface,
    paddingHorizontal: SPACING.md,
    paddingVertical: SPACING.sm,
    borderRadius: 20,
    marginRight: SPACING.sm,
    borderWidth: 1,
    borderColor: colors.border,
  },
  hashtagText: {
    fontSize: 14,
    color: colors.text.primary,
    fontWeight: '500',
  },
  });
};

export default HomeScreen;
